@model Mobit.Models.GelismisAramaModel
@using Mobit.Helpers
<style>
    .control-label{
        color:white;
    }
</style>
<div id="searchForm">
    <form id="myform" method="post" action="/Arama" enctype="multipart/form-data">
        @Html.AntiForgeryToken()
            <div class="form-group">
                <div class="col-md-12">
                    <label class="control-label">Kategori:</label><br />
                    @Html.DropDownList("KategoriId", null, "Kategori Seçiniz", htmlAttributes: new { @class = "form-control", @required = "required" })
                    @Html.ValidationMessageFor(model => model.KategoriId, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-12">
                    <label class="control-label">İl:</label><br />
                    @Html.DropDownList("ilId", null, "İl Seçiniz", htmlAttributes: new { @class = "form-control", @required = "required" })
                    @Html.ValidationMessageFor(model => model.ilId, "", new { @class = "text-danger" })
                </div>
            </div>
        <div class="form-group">
            <div class="col-md-12">
                <label class="control-label">İlçe:</label><br />
                @Html.DropDownList("ilceId", Enumerable.Empty<SelectListItem>(), "İlçe Seçiniz", htmlAttributes: new { @class = "form-control", @required = "required" })

                @Html.ValidationMessageFor(model => model.ilceId, "", new { @class = "text-danger" })

            </div>
        </div>
      
      
        <div class="form-group">
            <div class="col-md-12">
                <label class="control-label">Ara:</label><br />
                @*<input type="text" id="txtSearch" class="form-control" name="q" placeholder="Ara..." required>*@
                @Html.EditorFor(model => model.SearchKey, new { htmlAttributes = new { @class = "form-control", @placeholder = "Ara..." } })
                @Html.ValidationMessageFor(model => model.SearchKey, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-12">
                @*<button type="button" class="btn btn-default mr-xs mb-sm"><i class="fa fa-search"></i> Ara</button>*@
                <input type="submit" class="btn btn-default mr-xs mb-sm" value="Ara" />
            </div>
        </div>
    </form>

</div>

<script src="~/Scripts/vendor/jquery/jquery.min.js"></script>
<script src="~/Scripts/vendor/jquery.validation/jquery.validation.min.js"></script>


    <script>

        $('#ilId').change(function () {
            var ilId = $(this).val();

            if (ilId != null && ilId != '') {
                $.ajax({
                    type: "post",
                    url: "/Home/ilceGetir",
                    data: { ilId: ilId },
                    success: function (kategoriler) {

                        var dropdown = $('#ilceId');
                        dropdown.empty();

                        $.each(kategoriler, function (index, kategori) {
                            $('#ilceId').append($('<option/>', {
                                value: kategori.ilceId,
                                text: kategori.ilceAdi

                            }));

                        });

                    },
                    error: function (kategoriler) {

                        alert("Hata: İlçeler listelenemedi.");
                    },
                    beforeSend: function () {

                    },
                    complete: function () {

                    }
                });

            }
        });

    </script>



